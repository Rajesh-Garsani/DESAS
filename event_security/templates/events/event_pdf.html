<!doctype html>
{# templates/events/event_pdf.html #}
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ event.name }} - Details</title>
  <style>
    body { font-family: DejaVu Sans, Helvetica, Arial, sans-serif; font-size: 12px; color: #222; padding: 20px; }
    .header { text-align: center; margin-bottom: 20px; }
    h1 { margin: 0; font-size: 20px; }
    .meta { margin-top: 8px; font-size: 12px; color: #555; }
    .section { margin-top: 18px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 8px 6px; border: 1px solid #ccc; }
    th { background: #f2f2f2; text-align: left; }
    .small { font-size: 11px; color: #666; }
  </style>
</head>
<body>
  <div class="header">
    <h1>{{ event.name }}</h1>
    <div class="meta">Generated: {{ now|date:"Y-m-d H:i" }}</div>
  </div>

  <div class="section">
    <h3>Event Details</h3>
    <table>
      <tr>
        <th>Type</th><td>{{ event.get_event_type_display }}</td>
      </tr>
      <tr>
        <th>Date & Time</th><td>{{ event.datetime }}</td>
      </tr>
      <tr>
        <th>Location</th><td>{{ event.location }}</td>
      </tr>
      <tr>
        <th>Expected Crowd Size</th><td>{{ event.crowd_size }}</td>
      </tr>
      <tr>
        <th>Status</th><td>{{ event.get_status_display }}</td>
      </tr>
      <tr>
        <th>Registrar</th><td>{{ event.registrar.username }} &lt;{{ event.registrar.email }}&gt;</td>
      </tr>
    </table>
  </div>

  <div class="section">
    <h3>Security Requirements</h3>
    <table>
      <tr><th>Police Officers</th><td>{{ event.police_count }}</td></tr>
      <tr><th>Commandos</th><td>{{ event.commando_count }}</td></tr>
      <tr><th>Security Guards</th><td>{{ event.security_guard_count }}</td></tr>
      <tr><th>Total Requested</th><td>{{ event.total_guards_requested }}</td></tr>
    </table>
  </div>

  <div class="section">
    <h3>Assigned Security Personnel</h3>
    {% if guards %}
    <table>
      <thead>
        <tr><th>#</th><th>Name</th><th>Type</th><th>Email</th></tr>
      </thead>
      <tbody>
        {% for g in guards %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>{{ g.get_full_name|default:g.username }}</td>
          <td>
            {% if g.guard_profile %}{{ g.guard_profile.get_guard_type_display }}{% else %}-{% endif %}
          </td>
          <td>{{ g.email }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
      <p class="small">No guards assigned.</p>
    {% endif %}
  </div>

  <div class="section small">
    <p>Event description / notes:</p>
    <p>{{ event.description|default:"(No additional notes)" }}</p>
  </div>
</body>
</html>
