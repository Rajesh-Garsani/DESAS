{% extends "base.html" %}
{% block content %}
<h2>Messages Log</h2>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Sender</th>
      <th>Recipient</th>
      <th>Content</th>
      <th>Method</th>
      <th>Direction</th>
      <th>Status</th>
      <th>Sent At</th>
    </tr>
  </thead>
  <tbody>
    {% for log in logs %}
      <tr>
        <td>{{ log.sender|default:"-" }}</td>
        <td>{{ log.recipient }}</td>
        <td>{{ log.content|truncatechars:50 }}</td>
        <td>{{ log.method|title }}</td>
        <td>
          {% if log.direction == "outgoing" %}
            <span class="badge bg-success">Outgoing</span>
          {% else %}
            <span class="badge bg-info">Incoming</span>
          {% endif %}
        </td>
        <td>
          {% if log.status == "sent" %}
            <span class="badge bg-success">Sent</span>
          {% elif log.status == "failed" %}
            <span class="badge bg-danger">Failed</span>
          {% else %}
            <span class="badge bg-secondary">{{ log.status|title }}</span>
          {% endif %}
        </td>
        <td>{{ log.sent_at|date:"Y-m-d H:i" }}</td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="7" class="text-center">No messages logged yet.</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
